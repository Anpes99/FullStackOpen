(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t(6),c=t.n(o),u=t(3),i=t(0),a=function(e){return console.log("AddPerson props :  ....",{props:e}),Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:e.handleSubmitName,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:e.handleOnChangeName,value:e.newName})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:e.handleOnChangeNumber,value:e.newNumber})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add number"})})]})})},s=function(e){var n=e.persons,t=e.newFilter,r=e.remove,o=e.setPersons;return Object(i.jsx)("div",{children:(null===n||void 0===n?void 0:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))).map((function(e){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:[e.name," ",e.number]}),Object(i.jsx)("button",{onClick:function(){if(window.confirm("Do you really want to delete "+e.name+" from the list?")){var t=e.id;r(e.id),o(n.filter((function(e){return e.id!==t})))}},children:"X"})]},e.name)}))})},l=function(e){var n=e.handleFilterChange,t=e.newFilter;return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"filter shown with "}),Object(i.jsx)("input",{value:t,onChange:n})]})},d=t(4),b=t.n(d),j=function(e){return b.a.post("/api/persons",e)},h=function(){return b.a.get("/api/persons")},f=function(e){return b.a.delete("/api/persons/".concat(e))},m=function(e,n,t){return b.a.put("/api/persons/".concat(t),{name:e,number:n,id:t})},O=(t(38),function(e){var n=e.message,t=e.errorTrue;if(null===n)return null;return Object(i.jsx)("div",{style:t?{color:"red"}:{color:"green"},className:"error",children:n})}),p=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),d=Object(u.a)(c,2),b=d[0],p=d[1],v=Object(r.useState)(""),x=Object(u.a)(v,2),g=x[0],w=x[1],N=Object(r.useState)(""),y=Object(u.a)(N,2),C=y[0],S=y[1],k=Object(r.useState)(null),T=Object(u.a)(k,2),P=T[0],F=T[1],E=Object(r.useState)(!1),D=Object(u.a)(E,2),J=D[0],L=D[1];Object(r.useEffect)((function(){console.log("effect"),h().then((function(e){o([]),o(e.data)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(O,{message:P,errorTrue:J}),Object(i.jsx)(l,{handleFilterChange:function(e){S(e.target.value),o([]),h().then((function(e){o([]),o(e.data)}))}}),Object(i.jsx)(a,{newName:b,newNumber:g,handleOnChangeName:function(e){p(e.target.value)},handleOnChangeNumber:function(e){w(e.target.value)},handleSubmitName:function(e){e.preventDefault();for(var n={name:b,number:g},r=!1,c=t.find((function(e){return e.name===b})),u=0;u<t.length;u++)t[u].name===b&&(r=!0);r?c.number!==g&&(window.confirm("This person is already added to phonebook Would you like to replace the number?")?(m(c.name,g,c.id).then((function(){F("Number changed succesfully")})).catch((function(){L(!0),F("Error: That person was already deleted from the phonebook"),o(t.filter((function(e){return e.id!==c.id})))})),setTimeout((function(){F(null),L(!1)}),5e3)):window.alert("".concat(b," is already added to phonebook"))):j(n).then((function(e){o(t.concat(e.data)),F("Person added succesfully"),setTimeout((function(){F(null)}),5e3)})).catch((function(e){L(!0),F(e.response.data.error),setTimeout((function(){F(null),L(!1)}),5e3)}))}}),console.log("return"),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(s,{persons:t,remove:function(e){!function(e){f(e).then((function(){F("Person removed succesfully"),setTimeout((function(){F(null)}),5e3)}))}(e)},newFilter:C,setPersons:function(e){return o(e)}})]})};c.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.21e2939d.chunk.js.map