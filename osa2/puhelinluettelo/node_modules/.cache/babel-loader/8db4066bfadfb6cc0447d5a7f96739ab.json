{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\myyra\\\\puhelinluettelo\\\\fol\\\\puhelinluettelo\\\\puhelinluettelo\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Addperson from './components/Addperson';\nimport ShowNumbers from './components/ShowNumbers';\nimport FilterNumbers from './components/FilterNumbers';\nimport axios from 'axios';\nimport PersonService from './services/PersonService';\nimport './index.css';\nimport Notification from './components/Notification';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setFilter] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [errorTrue, setErrorTrue] = useState(false);\n  useEffect(() => {\n    console.log('effect');\n    PersonService.getAll().then(response => {\n      setPersons(response.data);\n    });\n  }, []);\n\n  const handleSubmitName = event => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n    let nameIn = false;\n\n    for (let index = 0; index < persons.length; index++) {\n      if (persons[index].name === newName) {\n        nameIn = true;\n      }\n    }\n\n    if (nameIn) {\n      const p = persons.find(p => p.name === newName);\n\n      if (p.number !== newNumber) {\n        const replaceConfirm = window.confirm(\"This person is already added to phonebook Would you like to replace the number?\");\n\n        if (replaceConfirm) {\n          PersonService.update(p.name, newNumber, p.id).then(() => {\n            setErrorMessage(`Number changed succesfully`);\n          }).catch(() => {\n            setErrorTrue(true);\n            setErrorMessage(\"Error: That person is not on the phonebook\");\n            setPersons(persons.filter(person => person.id !== p.id));\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n            setErrorTrue(false);\n          }, 5000);\n        } else window.alert(`${newName} is already added to phonebook`);\n      }\n    } else {\n      //const newPerson ={name : newName, number:newNumber}\n      PersonService.create(newPerson).then(response => {\n        setPersons(persons.concat(response.data));\n        setErrorMessage(`Person added succesfully`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      }).catch(error => {\n        console.log(\"error in handleSubmitName\");\n      });\n    }\n  };\n\n  const handleOnChangeName = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleOnChangeNumber = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setFilter(event.target.value);\n  };\n\n  const handleRemovePerson = id => {\n    const promise = PersonService.remove(id);\n    promise.then(() => {\n      setErrorMessage(`Person removed`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: errorMessage,\n      errorTrue: errorTrue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FilterNumbers, {\n      handleFilterChange: handleFilterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Addperson, {\n      newName: newName,\n      newNumber: newNumber,\n      handleOnChangeName: handleOnChangeName,\n      handleOnChangeNumber: handleOnChangeNumber,\n      handleSubmitName: handleSubmitName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), console.log('return'), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ShowNumbers, {\n      persons: persons,\n      remove: id => {\n        handleRemovePerson(id);\n      },\n      newFilter: newFilter,\n      setPersons: a => setPersons(a)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 7\n  }, this);\n};\n\n_s(App, \"/z9ljumpSCHOx39pALBCOzGI3y8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/myyra/puhelinluettelo/fol/puhelinluettelo/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","Addperson","ShowNumbers","FilterNumbers","axios","PersonService","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setFilter","errorMessage","setErrorMessage","errorTrue","setErrorTrue","console","log","getAll","then","response","data","handleSubmitName","event","preventDefault","newPerson","name","number","nameIn","index","length","p","find","replaceConfirm","window","confirm","update","id","catch","filter","person","setTimeout","alert","create","concat","error","handleOnChangeName","target","value","handleOnChangeNumber","handleFilterChange","handleRemovePerson","promise","remove","a"],"mappings":"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","sourcesContent":["import React,{ useState,useEffect} from 'react'\r\nimport Addperson from './components/Addperson'\r\nimport ShowNumbers from './components/ShowNumbers'\r\nimport FilterNumbers from './components/FilterNumbers'\r\nimport axios from 'axios'\r\nimport PersonService from './services/PersonService'\r\nimport './index.css'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons] = useState([]) \r\n    const [ newName, setNewName ] = useState('')\r\n    const [newNumber,setNewNumber] = useState('')\r\n    const [newFilter, setFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [errorTrue, setErrorTrue] = useState(false)\r\n\r\n    useEffect(() => {\r\n      console.log('effect')\r\n      PersonService\r\n        .getAll()\r\n        .then(response => {\r\n          setPersons(response.data)\r\n        })\r\n    }, [])\r\n\r\n    const handleSubmitName = (event) =>{\r\n        event.preventDefault()\r\n        const newPerson ={name : newName, number:newNumber}\r\n        let nameIn=false\r\n        for (let index = 0; index < persons.length; index++) {\r\n            if (persons[index].name === newName){nameIn=true}\r\n            \r\n        }\r\n        if (nameIn){\r\n         const p= persons.find(p=>p.name ===newName)\r\n          if (p.number!==newNumber){\r\n              const replaceConfirm=window.confirm(\"This person is already added to phonebook Would you like to replace the number?\")\r\n              if (replaceConfirm){\r\n               PersonService.update(p.name,newNumber,p.id)\r\n                                .then(()=> { \r\n                                  setErrorMessage(\r\n                                    `Number changed succesfully`)\r\n                                   } ).catch(() => \r\n                                    {setErrorTrue(true)\r\n                                      setErrorMessage(\"Error: That person is not on the phonebook\")\r\n                                      setPersons(persons.filter(person=>person.id!==p.id))\r\n                                      }\r\n\r\n                                    )\r\n                setTimeout(() => {\r\n                  setErrorMessage(null)\r\n                  setErrorTrue(false)\r\n                }, 5000)}\r\n              else window.alert(`${newName} is already added to phonebook`)}  \r\n            }\r\n         \r\n        else {\r\n          //const newPerson ={name : newName, number:newNumber}\r\n          PersonService\r\n                      .create(newPerson)\r\n                      .then(response=> {setPersons(persons.concat(response.data))\r\n                           \r\n                          \r\n                          setErrorMessage(\r\n                            `Person added succesfully`\r\n                          )\r\n                          setTimeout(() => {\r\n                            setErrorMessage(null)\r\n                          }, 5000)})\r\n    \r\n                      .catch(error=>{console.log(\"error in handleSubmitName\")})\r\n          \r\n      }\r\n    }\r\n\r\n    const handleOnChangeName = (event) =>{\r\n\r\n        setNewName(event.target.value)\r\n    }\r\n    const handleOnChangeNumber = (event) =>{\r\n\r\n        setNewNumber(event.target.value)\r\n    }\r\n    const handleFilterChange = (event) =>{\r\n\r\n        setFilter(event.target.value)\r\n    }\r\n\r\n    const handleRemovePerson = (id)=>{\r\n\r\n      const promise =PersonService.remove(id)\r\n      promise.then(()=> {\r\n                          \r\n      setErrorMessage(\r\n        `Person removed`\r\n      )\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)})\r\n    }\r\n    \r\n\r\n    return (\r\n      <div>\r\n        <h1>Phonebook</h1>\r\n        <Notification message={errorMessage} errorTrue={errorTrue}/>\r\n        <FilterNumbers handleFilterChange={handleFilterChange}/>\r\n                \r\n        <Addperson newName={newName} newNumber={newNumber} handleOnChangeName={handleOnChangeName} handleOnChangeNumber={handleOnChangeNumber} handleSubmitName={handleSubmitName} />\r\n               \r\n\r\n        {console.log('return')}\r\n        <h2>Numbers</h2>\r\n        <ShowNumbers persons={persons} remove={(id)=>{handleRemovePerson(id)}} newFilter={newFilter}  setPersons={(a)=>setPersons(a)}/>\r\n      </div>\r\n    )\r\n  \r\n  }\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}